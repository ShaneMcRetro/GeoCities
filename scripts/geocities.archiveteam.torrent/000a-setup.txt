# NOTE: Step through these one by one.


# You need a decent amount of hard drive space to work with GeoCities.
# - ≥1TB for the source data (from torrent or archive.org).
# - ≥2TB for the work space and final data set.
# - Use ext4 as the file systems. GeoCities was case-sensitive.


# We need to make sure all dependencies are installed upfront for Ubuntu 22.04.
# Start by updating the system.

sudo apt update && sudo apt dist-upgrade -y

# Install additional Perl Modules via apt; we do not use cpan here.
# These are needed for DBI, Data::Dumper, IO::All, Try::Tiny, XML::TreePP, DBD::Pg, YAML qw(LoadFile)

sudo apt install libdbi-perl libdata-dumper-simple-perl libio-all-perl libtry-tiny-perl libxml-treepp-perl libdbd-pg-perl libconfig-yaml-perl libcapture-tiny-perl

# Install other things that are needed, convmv (UTF-8), postgresql (database magic)

sudo apt install build-essential p7zip-full convmv postgresql postgresql-contrib libpq-dev libglib2.0-bin findutils 



# Next let's set some environment variables.

sudo nano ~/.bashrc


# Replace the username and name your drives appropriately.
# Username is assumed to be "ubuntu".
# Paste block at the bottom of the .bashrc file.

export GEO_SOURCE=/media/ubuntu/GC_1TB_SRC                            # Source distribution files; 1TB HDD
export GEO_WORK=/media/ubuntu/GC_2TB/work                             # Work (tmp) folder; 2TB SSD
export GEO_ARCHIVE=/media/ubuntu/GC_2TB/archive                       # Final data set (The Archives); 2TB SSD

export GEO_LOGS=/media/ubuntu/GC_2TB/log                              # Log files/lists used by PostgreSQL
export GEO_SCRIPTS=/home/ubuntu/Documents/GitHub/GeoCities/scripts    # Where the magic lives (Software)
# export GEO_SCREENSHOTS=/media/ubuntu/GC_2TB/screenshots             # Screenshots (Unused)

export GEO_DB_HOST='localhost'                                        # Database access
export GEO_DB_DB='Turtles'                                            # PostgreSQL database name
export GEO_DB_USER='despens'                                          # PostgreSQL database user
export GEO_DB_PASSWD='despens'                                        # PostgreSQL database password


# Some scripts will wipe temporary files after they are run. The only versions kept will be:
# - the originals (as in how the data was distributed, located in $GEO_SOURCE/geocities.archiveteam.torrent,
# - and the finished, workable archive files, located in $GEO_ARCHIVE

# Make some folders
mkdir -p /media/ubuntu/GC_2TB/archive
mkdir -p /media/ubuntu/GC_2TB/log
mkdir -p /media/ubuntu/GC_2TB/work

# Do a reboot for good measure.

sudo reboot
